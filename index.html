<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " vocab="http://ogp.me/ns" lang="en">
<head>

<meta charset="utf-8">

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<script type="text/javascript" src="/static/js/lib.js"></script>

<script type="text/javascript">
$(function() {
  var data_dir = getFile("");
  $("#error_dir").text(data_dir.success);
  if (data_dir.success) {
    for (var i = 0; i < data_dir.data.length; i++) {
      if (data_dir.data[i].type === "file") {
        data_dir.data[i].content = btoa(getRaw(data_dir.data[i].download_url).data);
      }
    }
  }
  $("#debug_dir").text(JSON.stringify(data_dir.data));

  var filename = (Math.random().toString(36)+'00000000000000000').slice(2, 18)

  var data_add = addFile(filename, "some text here");
  $("#error_add").text(data_add.success);
  $("#debug_add").text(JSON.stringify(data_add.data));
  $("#data_add").text(data_add.data.content.name);
  
  var data_get = getFile(data_add.data.content.name);
  $("#error_get").text(data_get.success);
  $("#debug_get").text(JSON.stringify(data_get.data));
  $("#data_get").text(atob(data_get.data.content));
  
  var data_upd = updFile(data_add.data.content.name, "newnewnewnewnew content");
  $("#error_upd").text(data_upd.success);
  $("#debug_upd").text(JSON.stringify(data_upd.data));
  $("#data_upd").text(data_upd.data.content.sha);
  
  var data_del = delFile(data_add.data.content.name);
  $("#error_del").text(data_del.success);
  $("#debug_del").text(JSON.stringify(data_del.data));
  $("#data_del").text(data_del.data.commit.sha);
});
</script>

</head>
<body>

<div id="error_dir"></div>
<div id="debug_dir"></div>
<div id="data_dir"></div>

<div id="error_add"></div>
<div id="debug_add"></div>
<div id="data_add"></div>

<div id="error_get"></div>
<div id="debug_get"></div>
<div id="data_get"></div>

<div id="error_upd"></div>
<div id="debug_upd"></div>
<div id="data_upd"></div>

<div id="error_del"></div>
<div id="debug_del"></div>
<div id="data_del"></div>

</body>
</html>
